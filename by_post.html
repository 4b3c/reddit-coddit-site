<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Coddit 3.0</title>
		<style type="text/css">
			table, th, td {
				border:  1px solid white;
				color: white;
			}
		</style>
		<style type="text/css">
			.bold {
				color: #744c90;
				font: bold;
				size: 20;
			}
		</style>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>

	</head>

	<body style="background-color: #1f3e4c;">
		<section>
			<h1 class="bold">Activity list on r/TeenagersButPog</h1>
			<a href="index.html">
				<img src="https://cdn.discordapp.com/attachments/826709575985266700/887905880618721280/contributions.png" alt="Sort by contributions" width=100>
			</a>
			<a href="by_comment.html">
				<img src="https://cdn.discordapp.com/attachments/826709575985266700/887905877548498994/comments.png" alt="Sort by comments" width=100>
			</a>
			<a href="by_post.html">
				<img src="https://cdn.discordapp.com/attachments/826709575985266700/887905882489356298/posts.png" alt="Sort by posts" width=100>
			</a>

			<table id="user_data" style="width:50%">
				<tr>
					<td>Username:</td>
					<td>Posts:</td>
					<td>Comments:</td>
				</tr>


			<script>
				$(document).ready(function () {
					$.getJSON("data_by_contribution.json", function (data) {
						var sortable = [];
						for (var user in data) {
							sortable.push([user, data[user][0], data[user][1]]);
						}

						console.log(sortable);

						sortable.sort(function(a, b) {return b[1] - a[1]});

						console.log(sortable);

						if (sortable.length > 40) {
							max_shown = 40;
						} else {
							max_shown = sortable.length;
						}

						for (var i = 0; i < max_shown; i++) {
							var student = "<tr><td>";
							student += sortable[i][0];
							student += "</td><td>";
							student += sortable[i][1];
							student += "</td><td>";
							student += sortable[i][2];
							student += "</td></tr>";

		                    $('#user_data').append(student);
		                };
	                });
                });
			</script>

		</section>
	</body>
</html>