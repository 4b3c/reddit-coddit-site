<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Coddit 3.0</title>
		<style type="text/css">
			table, th, td {
				border:  1px solid black;
				color: white;
			}
		</style>
		<style type="text/css">
			.bold {
				color: white;
				font: bold;
				size: 40;
			}
		</style>
		<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>

	</head>

	<body style="background-color: #1f3e4c;">
		<section>
			<h1 class="bold">Activity list on r/TeenagersButPog</h1>

		    <button type="submit" name="all">Sort by most contributions</button>
		    <button type="submit" name="posts">Sort by most posts</button>
		    <button type="submit" name="comments">Sort by most comments</button>

			<h2 class="bold">Top 100 contributors today:</h2>

			<table id="top_today" style="width:70%">
				<tr>
					<td>Rank:</td>
					<td>Username:</td>
					<td>Posts:</td>
					<td>Comments:</td>
					<td>Total:</td>
				</tr>

			<script>
				let btn1 = document.createElement("button");
				btn1.innerHTML = "Sort by most comments";
				btn1.type = "submit";
				btn1.name = "all";

				let btn2 = document.createElement("button");
				btn2.innerHTML = "Sort by most comments";
				btn2.type = "submit";
				btn2.name = "posts";

				let btn3 = document.createElement("button");
				btn3.innerHTML = "Sort by most comments";
				btn3.type = "submit";
				btn3.name = "comments";

				$(document).ready(function () {
					$.getJSON("data.json", function (data) {
						var sortable = [];
						for (var user in data) {
							sortable.push([user, data[user][0], data[user][1]]);
						}
						var sort_by = 0;
						
						btn1.onclick = function () {
							var sort_by = 0;
							console.log("AHAHAHHAHAH")
						};
						btn2.onclick = function () {
							var sort_by = 1;
							console.log("nop")
						};
						btn3.onclick = function () {
							var sort_by = 2;
							console.log("iok")
						};
						if (sort_by == 0) {
							sortable.sort(function(a, b) {return (b[1]+b[2]) - (a[1]+a[2])});
						} else if (sort_by == 1) {
							sortable.sort(function(a, b) {return b[1] - a[1]});
						} else if (sort_by == 2) {
							sortable.sort(function(a, b) {return b[2] - a[2]});
						}

						if (sortable.length - 1 < 100) {
							var length = sortable.length
						} else {
							var length = 100
						}

						for (var i = 0; i < length; i++) {
							var table_row = "<tr><td>";
							table_row += i + 1;
							table_row += "</td><td>";
							table_row += sortable[i][0];
							table_row += "</td><td>";
							table_row += sortable[i][1];
							table_row += "</td><td>";
							table_row += sortable[i][2];
							table_row += "</td><td>";
							table_row += sortable[i][1] + sortable[i][2];
							table_row += "</td></tr>";

		                    $('#top_today').append(table_row);
		                };
	                });
                });
			</script>

		</section>
	</body>
</html>